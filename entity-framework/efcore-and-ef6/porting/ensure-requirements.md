---
title: EF6 から EF Core - への移植要件の検証
author: rowanmiller
ms.author: divega
ms.date: 10/27/2016
ms.assetid: d3b66f3c-9d10-4974-a090-8ad093c9a53d
uid: efcore-and-ef6/porting/ensure-requirements
ms.openlocfilehash: 2f45039e63546d266ec6ce0bfa66ef7e9fb3d7e7
ms.sourcegitcommit: 01a75cd483c1943ddd6f82af971f07abde20912e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/27/2017
ms.locfileid: "26052862"
---
# <a name="before-porting-from-ef6-to-ef-core-validate-your-applications-requirements"></a>EF6 から EF コアへの移植する前に: アプリケーションの要件の検証

移植のプロセスを開始する前に、EF コアが、アプリケーションのデータ アクセス要件を満たしていることを検証する必要があります。

## <a name="missing-features"></a>足りない機能

EF 中核となるすべての機能をアプリケーションで使用する必要があることを確認してください。 参照してください[機能の比較](../features.md)EF6 に EF のコア機能を比較する方法の詳細な比較についてはします。 任意の必要な機能が不足している場合は、EF コアへの移植する前にこれらの機能の欠落を補うことができますを確認します。

## <a name="behavior-changes"></a>動作の変更

これは、網羅 EF6 と EF コア間の動作のいくつかの変更の一覧です。 保持する以下の点に、ポートとして、アプリケーション、アプリケーションの動作は表示されませんコンパイル エラーとしてスワップすると、EF コアに方法が変わる可能性がある重要です。

### <a name="dbsetaddattach-and-graph-behavior"></a>DbSet.Add/Attach とグラフの動作

EF6 でを呼び出す`DbSet.Add()`ナビゲーション プロパティで参照されているすべてのエンティティの再帰的な検索で、エンティティの結果にします。 任意のエンティティが検出され、コンテキストによって既に追跡されていないにも追加としてマークされます。 `DbSet.Attach()`すべてのエンティティがマークされている以外の動作は同じで、変更します。

**EF コアのような再帰検索を実行するが、若干異なるルールがいくつか。**

*  ルート エンティティが要求された状態では常に (の追加`DbSet.Add`変更しなかったと`DbSet.Attach`)。

*  **エンティティのナビゲーション プロパティの再帰検索中に存在します。**

    *  **エンティティの主キーがストアで生成された場合**

        * 主キーが値に設定されていない場合、状態が追加に設定されます。 主キーの値と見なされます「未設定」プロパティの型の CLR の既定値が割り当てられます (つまり`0`の`int`、`null`の`string`, などです。)。

        * 主キーが値に設定されている場合、状態に設定変更されません。

    *  主キーは、生成されたデータベースではありません、エンティティは、ルートと同じ状態で配置されます。

### <a name="code-first-database-initialization"></a>コードの最初のデータベースの初期化

**EF6 膨大な量のデータベース接続を選択すると、データベースの初期化を実行するマジックがあります。これらのルールのとおりです。**

* 構成が行われない場合、EF6 は SQL Express または LocalDb にデータベースを選択します。

* コンテキストと同じ名前で接続文字列が、アプリケーションの場合`App/Web.config`ファイルでは、この接続が使用されます。

* データベースが存在しない場合は作成されます。

* 存在しない場合、テーブル モデルからのデータベースでは、現在のモデルのスキーマがデータベースに追加されます。 移行が有効な場合は、データベースの作成が使用されます。

* データベースが存在するし、EF6 以前に作成した、スキーマ、スキーマが現在のモデルとの互換性チェックされます。 スキーマが作成されたため、モデルが変更された場合、例外がスローされます。

**この秘密のいずれかの EF コアは実行されません。**

* コードでは、データベース接続を明示的に構成する必要があります。

* 初期化は実行されません。 使用する必要があります`DbContext.Database.Migrate()`移行を適用する (または`DbContext.Database.EnsureCreated()`と`EnsureDeleted()`への移行を使用せず、データベースの作成/削除) します。

### <a name="code-first-table-naming-convention"></a>コードの最初のテーブルの名前付け規則

EF6 には、エンティティにマップされる既定のテーブル名を計算する複数形化サービスからエンティティ クラス名が実行されます。

名前を使用する EF コア、`DbSet`派生のコンテキストにエンティティが公開されているプロパティ。 エンティティがない場合、`DbSet`プロパティ後でクラス名を使用します。
