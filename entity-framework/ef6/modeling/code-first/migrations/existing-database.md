---
title: Code First Migrations を既存のデータベースの EF6 で
author: divega
ms.date: 10/23/2016
ms.assetid: f0cc4f93-67dd-4664-9753-0a9f913814db
ms.openlocfilehash: 77370ec7d922b8324b924a0b4aca3e58f5ec6066
ms.sourcegitcommit: 2b787009fd5be5627f1189ee396e708cd130e07b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/13/2018
ms.locfileid: "45490572"
---
# <a name="code-first-migrations-with-an-existing-database"></a><span data-ttu-id="e6479-102">Code First Migrations を既存のデータベースで</span><span class="sxs-lookup"><span data-stu-id="e6479-102">Code First Migrations with an existing database</span></span>
> [!NOTE]
> <span data-ttu-id="e6479-103">**EF4.3 以降のみ**-機能、Api、Entity Framework 4.1 で導入されたなどのこのページで説明します。</span><span class="sxs-lookup"><span data-stu-id="e6479-103">**EF4.3 Onwards Only** - The features, APIs, etc. discussed in this page were introduced in Entity Framework 4.1.</span></span> <span data-ttu-id="e6479-104">以前のバージョンを使用している場合、一部またはすべての情報は適用されません。</span><span class="sxs-lookup"><span data-stu-id="e6479-104">If you are using an earlier version, some or all of the information does not apply.</span></span>

<span data-ttu-id="e6479-105">この記事では、いずれかの Entity Framework によって作成されていない既存のデータベースで Code First Migrations の使用について説明します。</span><span class="sxs-lookup"><span data-stu-id="e6479-105">This article covers using Code First Migrations with an existing database, one that wasn’t created by Entity Framework.</span></span>

> [!NOTE]
> <span data-ttu-id="e6479-106">この記事では、基本的なシナリオで Code First Migrations を使用する方法を理解する前提としています。</span><span class="sxs-lookup"><span data-stu-id="e6479-106">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="e6479-107">そうしないかどうかを読み取る必要があります[Code First Migrations](~/ef6/modeling/code-first/migrations/index.md)続行する前にします。</span><span class="sxs-lookup"><span data-stu-id="e6479-107">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="screencasts"></a><span data-ttu-id="e6479-108">スクリーン キャスト</span><span class="sxs-lookup"><span data-stu-id="e6479-108">Screencasts</span></span>

<span data-ttu-id="e6479-109">この記事を読むよりもスクリーン キャストを見るとではなく、次の 2 つのビデオはこの記事と同じ内容を説明します。</span><span class="sxs-lookup"><span data-stu-id="e6479-109">If you'd rather watch a screencast than read this article, the following two videos cover the same content as this article.</span></span>

### <a name="video-one-migrations---under-the-hood"></a><span data-ttu-id="e6479-110">ビデオ 1:「移行 - 内部的には」</span><span class="sxs-lookup"><span data-stu-id="e6479-110">Video One: "Migrations - Under the Hood"</span></span>

<span data-ttu-id="e6479-111">[このスクリーン キャスト](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood)移行を追跡する方法について説明し、モデルに関する情報を使用して、モデルの変更を検出します。</span><span class="sxs-lookup"><span data-stu-id="e6479-111">[This screencast](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) covers how migrations tracks and uses information about the model to detect model changes.</span></span>

### <a name="video-two-migrations---existing-databases"></a><span data-ttu-id="e6479-112">ビデオ 2:「移行 - 既存のデータベース」</span><span class="sxs-lookup"><span data-stu-id="e6479-112">Video Two: "Migrations - Existing Databases"</span></span>

<span data-ttu-id="e6479-113">前のビデオから説明した概念に基づいて[このスクリーン キャスト](http://channel9.msdn.com/blogs/ef/migrations-existing-databases)を有効にして、既存のデータベースでの移行を使用する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e6479-113">Building on the concepts from the previous video, [this screencast](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) covers how to enable and use migrations with an existing database.</span></span>

## <a name="step-1-create-a-model"></a><span data-ttu-id="e6479-114">手順 1: モデルを作成します。</span><span class="sxs-lookup"><span data-stu-id="e6479-114">Step 1: Create a model</span></span>

<span data-ttu-id="e6479-115">既存のデータベースを対象とする Code First モデルを作成する最初の手順になります。</span><span class="sxs-lookup"><span data-stu-id="e6479-115">Your first step will be to create a Code First model that targets your existing database.</span></span> <span data-ttu-id="e6479-116">[既存のデータベースを Code First](~/ef6/modeling/code-first/workflows/existing-database.md)トピックがこれを行う方法の詳細なガイダンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="e6479-116">The [Code First to an Existing Database](~/ef6/modeling/code-first/workflows/existing-database.md) topic provides detailed guidance on how to do this.</span></span>

>[!NOTE]
> <span data-ttu-id="e6479-117">データベース スキーマへの変更が必要となるモデルに変更を加える前に、このトピックの手順の残りの部分を次に重要です。</span><span class="sxs-lookup"><span data-stu-id="e6479-117">It is important to follow the rest of the steps in this topic before making any changes to your model that would require changes to the database schema.</span></span> <span data-ttu-id="e6479-118">次の手順に必要なモデルとの同期をデータベース スキーマを使用します。</span><span class="sxs-lookup"><span data-stu-id="e6479-118">The following steps require the model to be in-sync with the database schema.</span></span>

## <a name="step-2-enable-migrations"></a><span data-ttu-id="e6479-119">手順 2: 移行を有効にします。</span><span class="sxs-lookup"><span data-stu-id="e6479-119">Step 2: Enable Migrations</span></span>

<span data-ttu-id="e6479-120">次の手順では、移行を有効にします。</span><span class="sxs-lookup"><span data-stu-id="e6479-120">The next step is to enable migrations.</span></span> <span data-ttu-id="e6479-121">実行してこれを行う、 **Enable-migrations**パッケージ マネージャー コンソール コマンド。</span><span class="sxs-lookup"><span data-stu-id="e6479-121">You can do this by running the **Enable-Migrations** command in Package Manager Console.</span></span>

<span data-ttu-id="e6479-122">このコマンドは、移行と呼ばれる、ソリューション内のフォルダーを作成し、構成と呼ばれる内部の 1 つのクラスを配置します。</span><span class="sxs-lookup"><span data-stu-id="e6479-122">This command will create a folder in your solution called Migrations, and put a single class inside it called Configuration.</span></span> <span data-ttu-id="e6479-123">構成クラスでは構成の移行、アプリケーションの詳細についてで調べることができます、 [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md)トピック。</span><span class="sxs-lookup"><span data-stu-id="e6479-123">The Configuration class is where you configure migrations for your application, you can find out more about it in the [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) topic.</span></span>

## <a name="step-3-add-an-initial-migration"></a><span data-ttu-id="e6479-124">手順 3: 最初の移行を追加します。</span><span class="sxs-lookup"><span data-stu-id="e6479-124">Step 3: Add an initial migration</span></span>

<span data-ttu-id="e6479-125">移行で作成および適用された後、これらを適用することも、ローカル データベースは他のデータベースに変更します。</span><span class="sxs-lookup"><span data-stu-id="e6479-125">Once migrations have been created and applied to the local database you may also want to apply these changes to other databases.</span></span> <span data-ttu-id="e6479-126">たとえば、テスト データベースをローカル データベースがあり、も実稼働データベースに、変更を適用することが最終的にか、他の開発者は、データベースをテストします。</span><span class="sxs-lookup"><span data-stu-id="e6479-126">For example, your local database may be a test database and you may ultimately want to also apply the changes to a production database and/or other developers test databases.</span></span> <span data-ttu-id="e6479-127">この手順の 2 つのオプションがあるし、1 つ選択する必要がありますが他のすべてのデータベースのスキーマが空か、現在のローカルのデータベースのスキーマと一致するかどうかに依存します。</span><span class="sxs-lookup"><span data-stu-id="e6479-127">There are two options for this step and the one you should pick depends whether or not the schema of any other databases is empty or currently matches the schema of the local database.</span></span>

-   <span data-ttu-id="e6479-128">**オプション 1: は、開始点として、既存のスキーマを使用します。**</span><span class="sxs-lookup"><span data-stu-id="e6479-128">**Option One: Use existing schema as starting point.**</span></span> <span data-ttu-id="e6479-129">他のデータベースの移行を将来的に適用されますが、ローカル データベースが現在に同じスキーマがある場合は、この方法を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6479-129">You should use this approach when other databases that migrations will be applied to in the future will have the same schema as your local database currently has.</span></span> <span data-ttu-id="e6479-130">たとえば、ローカル テスト データベースには、v1、実稼働データベースの現在と一致して、v2、実稼働データベースを更新するこれらの移行は後で適用する場合これを使用する場合があります。</span><span class="sxs-lookup"><span data-stu-id="e6479-130">For example, you might use this if your local test database currently matches v1 of your production database and you will later apply these migrations to update your production database to v2.</span></span>
-   <span data-ttu-id="e6479-131">**オプション 2: は、開始点として空のデータベースを使用します。**</span><span class="sxs-lookup"><span data-stu-id="e6479-131">**Option Two: Use empty database as starting point.**</span></span> <span data-ttu-id="e6479-132">移行を将来的に適用されます他のデータベースが空 (またはまだ存在していない) 場合は、このアプローチを使用します。</span><span class="sxs-lookup"><span data-stu-id="e6479-132">You should use this approach when other databases that migrations will be applied to in the future are empty (or do not exist yet).</span></span> <span data-ttu-id="e6479-133">たとえば、する場合、テスト データベースを使用して、アプリケーションの開発を開始 migrations を使用することがなくは後でゼロから実稼働データベースを作成するこれを使用する場合があります。</span><span class="sxs-lookup"><span data-stu-id="e6479-133">For example, you might use this if you started developing your application using a test database but without using migrations and you will later want to create a production database from scratch.</span></span>

### <a name="option-one-use-existing-schema-as-a-starting-point"></a><span data-ttu-id="e6479-134">オプション 1: 開始点として既存のスキーマを使用します。</span><span class="sxs-lookup"><span data-stu-id="e6479-134">Option One: Use existing schema as a starting point</span></span>

<span data-ttu-id="e6479-135">Code First Migrations は、モデルの変更を検出するために、最新の移行に格納されたモデルのスナップショットを使用 (この点についての詳細な情報が見つかります[チーム環境での Code First Migrations](~/ef6/modeling/code-first/migrations/teams.md))。</span><span class="sxs-lookup"><span data-stu-id="e6479-135">Code First Migrations uses a snapshot of the model stored in the most recent migration to detect changes to the model (you can find detailed information about this in [Code First Migrations in Team Environments](~/ef6/modeling/code-first/migrations/teams.md)).</span></span> <span data-ttu-id="e6479-136">データベースが既に現在のモデルのスキーマであると仮定するため、スナップショットとして現在のモデルが空の (操作なし) 移行を生成します。</span><span class="sxs-lookup"><span data-stu-id="e6479-136">Since we are going to assume that databases already have the schema of the current model, we will generate an empty (no-op) migration that has the current model as a snapshot.</span></span>

1.  <span data-ttu-id="e6479-137">実行、 **Add-migration InitialCreate – IgnoreChanges**パッケージ マネージャー コンソール コマンド。</span><span class="sxs-lookup"><span data-stu-id="e6479-137">Run the **Add-Migration InitialCreate –IgnoreChanges** command in Package Manager Console.</span></span> <span data-ttu-id="e6479-138">スナップショットとして、現在のモデルに空の移行を作成します。</span><span class="sxs-lookup"><span data-stu-id="e6479-138">This creates an empty migration with the current model as a snapshot.</span></span>
2.  <span data-ttu-id="e6479-139">実行、 **Update-database**パッケージ マネージャー コンソール コマンド。</span><span class="sxs-lookup"><span data-stu-id="e6479-139">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="e6479-140">InitialCreate 移行データベースに適用されます。</span><span class="sxs-lookup"><span data-stu-id="e6479-140">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="e6479-141">行が追加されるだけですので、実際の移行には、すべての変更が含まれていない、 \_\_この移行が既に適用されていることを示す MigrationsHistory テーブル。</span><span class="sxs-lookup"><span data-stu-id="e6479-141">Since the actual migration doesn’t contain any changes, it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>

### <a name="option-two-use-empty-database-as-a-starting-point"></a><span data-ttu-id="e6479-142">オプション 2: 開始点として空のデータベースを使用します。</span><span class="sxs-lookup"><span data-stu-id="e6479-142">Option Two: Use empty database as a starting point</span></span>

<span data-ttu-id="e6479-143">このシナリオでは、既にローカル データベースに存在するテーブルを含むゼロからデータベース全体を作成できるへの移行が必要です。</span><span class="sxs-lookup"><span data-stu-id="e6479-143">In this scenario we need Migrations to be able to create the entire database from scratch – including the tables that are already present in our local database.</span></span> <span data-ttu-id="e6479-144">既存のスキーマを作成するロジックを含む InitialCreate 移行を生成しようとしています。</span><span class="sxs-lookup"><span data-stu-id="e6479-144">We’re going to generate an InitialCreate migration that includes logic to create the existing schema.</span></span> <span data-ttu-id="e6479-145">この移行は既に適用されているように見える、既存のデータベース、しましょう。</span><span class="sxs-lookup"><span data-stu-id="e6479-145">We’ll then make our existing database look like this migration has already been applied.</span></span>

1.  <span data-ttu-id="e6479-146">実行、 **Add-migration InitialCreate**パッケージ マネージャー コンソール コマンド。</span><span class="sxs-lookup"><span data-stu-id="e6479-146">Run the **Add-Migration InitialCreate** command in Package Manager Console.</span></span> <span data-ttu-id="e6479-147">これには、既存のスキーマを作成する移行が作成されます。</span><span class="sxs-lookup"><span data-stu-id="e6479-147">This creates a migration to create the existing schema.</span></span>
2.  <span data-ttu-id="e6479-148">新しく作成した移行のアップ メソッド内のすべてのコードをコメントします。</span><span class="sxs-lookup"><span data-stu-id="e6479-148">Comment out all code in the Up method of the newly created migration.</span></span> <span data-ttu-id="e6479-149">これにより、'' 移行を適用するローカルのデータベースすべてなど既存のテーブルを再作成を試みることがなくすることができます。</span><span class="sxs-lookup"><span data-stu-id="e6479-149">This will allow us to ‘apply’ the migration to the local database without trying to recreate all the tables etc. that already exist.</span></span>
3.  <span data-ttu-id="e6479-150">実行、 **Update-database**パッケージ マネージャー コンソール コマンド。</span><span class="sxs-lookup"><span data-stu-id="e6479-150">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="e6479-151">InitialCreate 移行データベースに適用されます。</span><span class="sxs-lookup"><span data-stu-id="e6479-151">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="e6479-152">実際の移行が含まれていないためすべての変更が (ために一時的にコメント)、行が追加されるだけです、 \_\_この移行が既に適用されていることを示す MigrationsHistory テーブル。</span><span class="sxs-lookup"><span data-stu-id="e6479-152">Since the actual migration doesn’t contain any changes (because we temporarily commented them out), it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>
4.  <span data-ttu-id="e6479-153">アップ メソッドのコード コメント解除します。</span><span class="sxs-lookup"><span data-stu-id="e6479-153">Un-comment the code in the Up method.</span></span> <span data-ttu-id="e6479-154">これは、今後作成されるデータベースには、この移行を適用するときに、ローカル データベースに既に存在していたスキーマは移行して作成することを意味します。</span><span class="sxs-lookup"><span data-stu-id="e6479-154">This means that when this migration is applied to future databases, the schema that already existed in the local database will be created by migrations.</span></span>

## <a name="things-to-be-aware-of"></a><span data-ttu-id="e6479-155">注意すべき点</span><span class="sxs-lookup"><span data-stu-id="e6479-155">Things to be aware of</span></span>

<span data-ttu-id="e6479-156">既存のデータベースに対して移行を使用している場合は注意する必要があるいくつかの点があります。</span><span class="sxs-lookup"><span data-stu-id="e6479-156">There are a few things you need to be aware of when using Migrations against an existing database.</span></span>

### <a name="defaultcalculated-names-may-not-match-existing-schema"></a><span data-ttu-id="e6479-157">既定/計算の名前が既存のスキーマが一致しません。</span><span class="sxs-lookup"><span data-stu-id="e6479-157">Default/calculated names may not match existing schema</span></span>

<span data-ttu-id="e6479-158">移行は、スキャフォールディング、移行時に明示的に列とテーブルの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="e6479-158">Migrations explicitly specifies names for columns and tables when it scaffolds a migrations.</span></span> <span data-ttu-id="e6479-159">ただし、移行を適用するときに、移行がの既定の名前を計算するその他のデータベース オブジェクトがあります。</span><span class="sxs-lookup"><span data-stu-id="e6479-159">However, there are other database objects that Migrations calculates a default name for when applying the migrations.</span></span> <span data-ttu-id="e6479-160">これには、インデックスと外部キー制約が含まれます。</span><span class="sxs-lookup"><span data-stu-id="e6479-160">This includes indexes and foreign key constraints.</span></span> <span data-ttu-id="e6479-161">既存のスキーマを対象とするときにこれらの計算の名前は、データベースで実際に存在するものが一致しないが。</span><span class="sxs-lookup"><span data-stu-id="e6479-161">When targeting an existing schema, these calculated names may not match what actually exists in your database.</span></span>

<span data-ttu-id="e6479-162">このことに注意する必要がある場合は、以下には、いくつか例を示します。</span><span class="sxs-lookup"><span data-stu-id="e6479-162">Here are some examples of when you need to be aware of this:</span></span>

<span data-ttu-id="e6479-163">**使用した場合 'オプションの 1 つ: 既存のスキーマを使用して、開始点として' 手順 3。**</span><span class="sxs-lookup"><span data-stu-id="e6479-163">**If you used ‘Option One: Use existing schema as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="e6479-164">モデル内の将来の変更は、変更またはデータベース オブジェクトが異なるという名前の 1 つを削除する必要がある場合は、正しい名前を指定するへの移行をスキャフォールディングを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6479-164">If future changes in your model require changing or dropping one of the database objects that is named differently, you will need to modify the scaffolded migration to specify the correct name.</span></span> <span data-ttu-id="e6479-165">移行 Api では、これを行うことができるようにする省略可能な名前パラメーターを指定します。</span><span class="sxs-lookup"><span data-stu-id="e6479-165">The Migrations APIs have an optional Name parameter that allows you to do this.</span></span>
    <span data-ttu-id="e6479-166">など、既存のスキーマは IndexFk という名前のインデックスを持つ BlogId の外部キー列と Post のテーブルがある\_BlogId します。</span><span class="sxs-lookup"><span data-stu-id="e6479-166">For example, your existing schema may have a Post table with a BlogId foreign key column that has an index named IndexFk\_BlogId.</span></span> <span data-ttu-id="e6479-167">ただし、既定では移行予想 IX 名前を指定するには、このインデックス\_BlogId します。</span><span class="sxs-lookup"><span data-stu-id="e6479-167">However, by default Migrations would expect this index to be named IX\_BlogId.</span></span> <span data-ttu-id="e6479-168">このインデックスを削除することになるモデルに変更を加えた場合は、スキャフォールディング DropIndex 呼び出しを変更し、IndexFk を指定する必要があります。\_BlogId 名。</span><span class="sxs-lookup"><span data-stu-id="e6479-168">If you make a change to your model that results in dropping this index, you will need to modify the scaffolded DropIndex call to specify the IndexFk\_BlogId name.</span></span>

<span data-ttu-id="e6479-169">**使用した場合 'オプション 2: 開始点として使用して空のデータベース' 手順 3。**</span><span class="sxs-lookup"><span data-stu-id="e6479-169">**If you used ‘Option Two: Use empty database as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="e6479-170">ローカル データベースに対して (空のデータベースへの復元) は、初期移行のダウン メソッドを実行しようとしています。 移行はインデックスと不適切な名前を使用して、外部キー制約を削除しようと試みるために失敗します。</span><span class="sxs-lookup"><span data-stu-id="e6479-170">Trying to run the Down method of the initial migration (that is, reverting to an empty database) against your local database may fail because Migrations will try to drop indexes and foreign key constraints using the incorrect names.</span></span> <span data-ttu-id="e6479-171">これはのみに影響、ローカル データベースから他のデータベースが最初の移行のアップ メソッドを使用して最初から作成されます。</span><span class="sxs-lookup"><span data-stu-id="e6479-171">This will only affect your local database since other databases will be created from scratch using the Up method of the initial migration.</span></span>
    <span data-ttu-id="e6479-172">空の状態には、既存のローカル データベースをダウン グレードする場合は、データベースを削除するか、すべてのテーブルの削除のいずれか、手動で行う最も簡単なは。</span><span class="sxs-lookup"><span data-stu-id="e6479-172">If you want to downgrade your existing local database to an empty state it is easiest to do this manually, either by dropping the database or dropping all the tables.</span></span> <span data-ttu-id="e6479-173">この初期グレードは、既定の名前を持つすべてのデータベース オブジェクトを再作成は後、のでこの問題が存在しない自体もう一度です。</span><span class="sxs-lookup"><span data-stu-id="e6479-173">After this initial downgrade all database objects will be recreated with the default names, so this issue will not present itself again.</span></span>
-   <span data-ttu-id="e6479-174">モデル内の将来の変更は、変更またはデータベース オブジェクトが異なるという名前の 1 つを削除する必要がある場合これに対しては機能しません、既存のローカル データベース – 名前は、既定値と一致しないためです。</span><span class="sxs-lookup"><span data-stu-id="e6479-174">If future changes in your model require changing or dropping one of the database objects that is named differently, this will not work against your existing local database – since the names won’t match the defaults.</span></span> <span data-ttu-id="e6479-175">ただし、移行によって選択された既定の名前を使用したはために、'一' から作成されたデータベースに対しては機能します。</span><span class="sxs-lookup"><span data-stu-id="e6479-175">However, it will work against databases that were created ‘from scratch’ since they will have used the default names chosen by Migrations.</span></span>
    <span data-ttu-id="e6479-176">ローカルの既存のデータベースにこれらの変更を手動で行うか、またはを他のコンピューターで、移行、データベースをゼロから再作成することを検討する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e6479-176">You could either make these changes manually on your local existing database, or consider having Migrations recreate your database from scratch – as it will on other machines.</span></span>
-   <span data-ttu-id="e6479-177">初期移行のアップ メソッドを使用して作成されたデータベース ローカルのデータベースからインデックスの計算される既定の名前からが若干異なるし、外部キー制約が使用されます。</span><span class="sxs-lookup"><span data-stu-id="e6479-177">Databases created using the Up method of your initial migration may differ slightly from the local database since the calculated default names for indexes and foreign key constraints will be used.</span></span> <span data-ttu-id="e6479-178">可能性がありますも最終的に余分なインデックスの移行は既定では外部キー列にインデックスを作成する、– このしなかった可能性があります、元のローカル データベース内のケースとして。</span><span class="sxs-lookup"><span data-stu-id="e6479-178">You may also end up with extra indexes as Migrations will create indexes on foreign key columns by default – this may not have been the case in your original local database.</span></span>

### <a name="not-all-database-objects-are-represented-in-the-model"></a><span data-ttu-id="e6479-179">すべてのデータベース オブジェクトは、モデルで表されます</span><span class="sxs-lookup"><span data-stu-id="e6479-179">Not all database objects are represented in the model</span></span>

<span data-ttu-id="e6479-180">移行は、モデルの一部ではないデータベース オブジェクトには処理されません。</span><span class="sxs-lookup"><span data-stu-id="e6479-180">Database objects that are not part of your model will not be handled by Migrations.</span></span> <span data-ttu-id="e6479-181">これには、ビュー、ストアド プロシージャ、アクセス許可のモデル、追加のインデックスなどの一部ではないテーブルを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="e6479-181">This can include views, stored procedures, permissions, tables that are not part of your model, additional indexes, etc.</span></span>

<span data-ttu-id="e6479-182">このことに注意する必要がある場合は、以下には、いくつか例を示します。</span><span class="sxs-lookup"><span data-stu-id="e6479-182">Here are some examples of when you need to be aware of this:</span></span>

-   <span data-ttu-id="e6479-183">オプションに関係なく選択した '手順 3.' で、モデル内の将来の変更は、変更、またはこれらの変更を移行することはわかりませんこれら追加のオブジェクトを削除する必要がある場合。</span><span class="sxs-lookup"><span data-stu-id="e6479-183">Regardless of the option you chose in ‘Step 3’, if future changes in your model require changing or dropping these additional objects Migrations will not know to make these changes.</span></span> <span data-ttu-id="e6479-184">たとえばを追加のインデックスを持つ列を削除する場合の移行が登録されていないインデックスを削除します。</span><span class="sxs-lookup"><span data-stu-id="e6479-184">For example, if you drop a column that has an additional index on it, Migrations will not know to drop the index.</span></span> <span data-ttu-id="e6479-185">スキャフォールディングの移行にこれを手動で追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e6479-185">You will need to manually add this to the scaffolded Migration.</span></span>
-   <span data-ttu-id="e6479-186">使用した場合 ' オプション 2: 開始点として使用して空のデータベース '、初期移行のアップ メソッドによってこれらの追加オブジェクトは作成されません。</span><span class="sxs-lookup"><span data-stu-id="e6479-186">If you used ‘Option Two: Use empty database as a starting point’, these additional objects will not be created by the Up method of your initial migration.</span></span>
    <span data-ttu-id="e6479-187">場合のこれらの追加オブジェクトを処理するメソッドをおよびを変更することができます。</span><span class="sxs-lookup"><span data-stu-id="e6479-187">You can modify the Up and Down methods to take care of these additional objects if you wish.</span></span> <span data-ttu-id="e6479-188">ビュー: など – 移行 API でネイティブにサポートされていないオブジェクトを使用することができます、 [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx)メソッドを作成/削除にする SQL そのものを実行します。</span><span class="sxs-lookup"><span data-stu-id="e6479-188">For objects that are not natively supported in the Migrations API – such as views – you can use the [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) method to run raw SQL to create/drop them.</span></span>
