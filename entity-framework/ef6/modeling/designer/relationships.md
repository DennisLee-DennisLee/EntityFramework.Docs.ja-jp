---
title: リレーションシップの EF デザイナー - EF6
author: divega
ms.date: 2016-10-23
ms.prod: entity-framework
ms.author: divega
ms.manager: avickers
ms.technology: entity-framework-6
ms.topic: article
ms.assetid: 402fe960-754b-470f-976b-e5de3e9986b5
caps.latest.revision: 3
ms.openlocfilehash: f924945b19dd6d73847ff3ec52c0b5a286c591bb
ms.sourcegitcommit: 9ae4473425c5e76337c9d032b0e5dbfedf1fcf57
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/09/2018
ms.locfileid: "39122716"
---
# <a name="relationships---ef-designer"></a>リレーションシップの EF デザイナー
> [!NOTE]
> このページは、EF Designer を使用して、モデル内の関係を設定する方法についての情報を提供します。 EF とアクセスし、リレーションシップを使用してデータを操作する方法に関係の詳細については、次を参照してください。[リレーションシップとナビゲーション プロパティ](~/ef6/fundamentals/relationships.md)します。

アソシエーションは、モデルのエンティティ型間のリレーションシップを定義します。 このトピックでは、Entity Framework デザイナー (EF Designer) とのアソシエーションをマップする方法を示します。 次の図は、EF Designer を使用する場合に使用される主なウィンドウを示します。

![EFDesigner](~/ef6/media/efdesigner.png)

> [!NOTE]
> 概念モデルをビルドすると、エラー一覧にマップされていないエンティティとアソシエーションに関する警告があります。 エラーが解消されますモデルからデータベースを生成することを選択した後ために、これらの警告を無視できます。

## <a name="associations-overview"></a>アソシエーションの概要

EF デザイナーを使用してモデルを設計するときに、.edmx ファイルは、モデルを表します。 .Edmx ファイルで、**アソシエーション**要素が 2 つのエンティティ型間のリレーションシップを定義します。 アソシエーションでは、リレーションシップに関連するエンティティ型、およびリレーションシップの各 End におけるエンティティ型の数 (多重度と呼ばれる) を指定する必要があります。 値の 1 つ (1)、0 個または 1 (0..1)、または複数のアソシエーション end の多重度を持つことができます (\*)。 この情報が 2 つの子で指定された**エンド**要素。

実行時に (選択した場合、エンティティ内の外部キーを公開する) にアソシエーションの一方の end のエンティティ型のインスタンスのナビゲーション プロパティまたは外部キーからアクセスできます。 公開されている外部キーを持つ、エンティティ間のリレーションシップが管理されている、 **ReferentialConstraint**要素 (子要素の**アソシエーション**要素)。 常に、エンティティ内のリレーションシップの外部キーを公開することをお勧めします。

> [!NOTE]
> 多対多で (\*:\*) エンティティに外部キーを追加することはできません。 \*:\*リレーションシップ、関連付け情報は、独立したオブジェクトで管理されます。

CSDL 要素に関する情報 (**ReferentialConstraint**、**アソシエーション**など) を参照してください、 [CSDL 仕様](~/ef6/modeling/designer/advanced/edmx/csdl-spec.md)します。

## <a name="create-and-delete-associations"></a>作成し、関連付けを削除します。

.Edmx ファイルのモデル コンテンツは EF Designer の更新プログラムとの関連付けを作成します。 アソシエーションを作成した後 (このトピックで後述します)、アソシエーションのマッピングを作成する必要があります。

> [!NOTE]
> このセクションでは、モデル間のアソシエーションを作成するエンティティを既に追加したことを前提としています。

### <a name="to-create-an-association"></a>アソシエーションを作成するには

1.  デザイン サーフェイスの空の領域を右クリックし、 をポイント**新規追加**、選択と**関連しています...**。
2.  関連付けの設定を入力、**の関連付けの追加**ダイアログ。

    ![AddAssociation](~/ef6/media/addassociation.png)

    > [!NOTE]
    > いないアソシエーションの end にあるエンティティにオフにするとナビゲーション プロパティまたは外部キー プロパティを追加することができます、* * ナビゲーション プロパティ * * と * * を外部キー プロパティを追加、&lt;エンティティ型の名前&gt;エンティティ * *チェック ボックスをオンします。 ナビゲーション プロパティを 1 つだけ追加する場合、アソシエーションの検査は一方向のみ可能になります。 ナビゲーション プロパティを追加しない場合、アソシエーションの End にあるエンティティにアクセスするには、外部キー プロパティを追加する必要があります。
    
3.  **[OK]** をクリックします。

### <a name="to-delete-an-association"></a>アソシエーションを削除するには

次のいずれかの関連操作を削除します。

-   EF デザイナー サーフェスと選択のアソシエーションを右クリックして**削除**します。

- または

-   1 つまたは複数のアソシエーションを選択し、Del キーを押します。

## <a name="include-foreign-key-properties-in-your-entities-referential-constraints"></a>(参照制約)、エンティティ内の外部キー プロパティを含める

常に、エンティティ内のリレーションシップの外部キーを公開することをお勧めします。 Entity Framework は、プロパティがリレーションシップの外部キーとして機能することを識別するために、参照に関する制約を使用します。

オンにした場合、***に外部キー プロパティを追加、&lt;エンティティ型の名前&gt;エンティティ***チェック ボックスがこの参照に関する制約が追加されたリレーションシップを作成する場合。

EF Designer を追加または変更を追加または編集、参照に関する制約 EF Designer を使用すると、 **ReferentialConstraint** .edmx ファイルの CSDL の内容の要素。

-   編集するアソシエーションをダブルクリックします。
    **参照に関する制約** ダイアログ ボックスが表示されます。
-   **プリンシパル**ドロップダウン リストで、参照に関する制約のプリンシパル エンティティを選択します。
    エンティティのキー プロパティに追加されます、**プリンシパル キー**ダイアログ ボックスの一覧。
-   **依存**ドロップダウン リストで、参照に関する制約の依存エンティティを選択します。
-   依存キーを持つ各プリンシパル キーで、ドロップダウン リストから対応する依存キーを選択します。、**依存キー**列。

    ![RefConstraint](~/ef6/media/refconstraint.png)

-   **[OK]** をクリックします。

## <a name="create-and-edit-association-mappings"></a>作成し、アソシエーションのマッピングの編集

アソシエーションがデータベースにマップする方法を指定することができます、**マッピングの詳細**EF デザイナーのウィンドウ。

> [!NOTE]
> 指定された参照に関する制約がない関連付けの詳細のみマップできます。 参照に関する制約が指定されている場合、エンティティの外部キー プロパティが含まれているし、コントロールの外部キーにマッピングする列にエンティティのマッピングの詳細を使用することができます。

### <a name="create-an-association-mapping"></a>アソシエーションのマッピングを作成します。

-   デザイン サーフェスと選択のアソシエーションを右クリックして**テーブル マッピング**します。
    アソシエーションのマッピングが表示されます、**マッピングの詳細**ウィンドウ。
-   クリックして**テーブルまたはビューの追加**します。
    ストレージ モデル内のすべてのテーブルを示すドロップダウン リストが表示されます。
-   アソシエーションがマップされるテーブルを選択します。
    **マッピングの詳細**ウィンドウが表示されます、アソシエーション、エンティティ型のキー プロパティの両方の end の各**エンド**します。
-   各キーのプロパティをクリックして、**列**フィールドし、プロパティのマップ先の列を選択します。

    ![MappingDetails4](~/ef6/media/mappingdetails4.png)

### <a name="edit-an-association-mapping"></a>アソシエーションのマッピングを編集します。

-   デザイン サーフェスと選択のアソシエーションを右クリックして**テーブル マッピング**します。
    アソシエーションのマッピングが表示されます、**マッピングの詳細**ウィンドウ。
-   クリックして**マップ&lt;テーブル名&gt;** します。
    ストレージ モデル内のすべてのテーブルを示すドロップダウン リストが表示されます。
-   アソシエーションがマップされるテーブルを選択します。
    **マッピングの詳細**ウィンドウには、両方の End で関連付けとエンティティ型のキー プロパティの両方の end が表示されます。
-   各キーのプロパティをクリックして、**列**フィールドし、プロパティのマップ先の列を選択します。

## <a name="edit-and-delete-navigation-properties"></a>編集およびナビゲーション プロパティの削除

ナビゲーション プロパティには、モデル内で、アソシエーションの末尾にあるエンティティを検索するために使用するショートカット プロパティです。 ナビゲーション プロパティは、2 つのエンティティ型の間のアソシエーションを作成するときに作成できます。

#### <a name="to-edit-navigation-properties"></a>ナビゲーション プロパティを編集するには

-   EF デザイナー画面でナビゲーション プロパティを選択します。
    Visual Studio でのナビゲーション プロパティに関する情報が表示されます**プロパティ**ウィンドウ。
-   プロパティの設定を変更、**プロパティ**ウィンドウ。

#### <a name="to-delete-navigation-properties"></a>ナビゲーション プロパティを削除するには

-   外部キーが概念モデルのエンティティ型で公開されない場合、ナビゲーション プロパティを削除すると、対応するアソシエーションの検査が一方向のみ可能になるか、またはまったく検査できなくなる可能性があります。
-   ナビゲーション プロパティを EF デザイナー サーフェスと選択を右クリックして**削除**します。
